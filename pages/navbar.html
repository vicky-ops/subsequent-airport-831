<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="navbar.css">
  </head>

  
  <body>
    
    <div id="navbar">
        
      
      </div>

  </body>
</html>
<script src="./navbar.js" type="module"></script>
<script>
 
function openForm() {
    document.getElementById("popupForm").style.display = "block";
    
  }
  function closeForm() {
    document.getElementById("popupForm").style.display = "none";
  }


  function openForm2() {
    closeForm();
    document.getElementById("popupForm2").style.display = "block";
  }
  function closeForm2() {
    document.getElementById("popupForm2").style.display = "none";
  }


  async function mainfunc2(e){
    e.preventDefault();
    let signupdata={
      name:document.getElementById("email2").value,
      email:document.getElementById("email2").value,
      password:document.getElementById("pass2").value,
      username: document.getElementById("email2").value,
      mobile:document.getElementById("email2").value,
      description:document.getElementById("email2").value,
    };
    signupdata=JSON.stringify(signupdata);
    let data1={
      firstname:document.getElementById("firstname").value,
      secondname:document.getElementById("secondname").value,
      email:document.getElementById("email2").value,
      
    };
    localStorage.setItem("users",JSON.stringify(data1));

    let signuplink='https://masai-api-mocker.herokuapp.com/auth/register';

    let response=await fetch(signuplink,{
      method:'POST',
      body:signupdata,
      headers:{
        'Content-Type':'application/json',
      },
    });
    let data=await response.json();
    console.log(data.error);
    if(data.error==false)
    {
      alert("Registration Succesful");
      closeForm2();
      
      let image1=document.createElement("img");
      image1.src="https://dynamic-media-cdn.tripadvisor.com/media/photo-o/1a/f6/77/ae/default-avatar-2020-2.jpg?w=100&h=-1&s=1";
      let fourth=document.getElementById("newsign");
      image1.style="height:40px;width:40px;border-radius:20px;margin-top:10px;margin-left:10px";
      // fourth.innerHTML="";
      fourth.innerHTML="";
      let fourth2=document.getElementById("newsign2");
      fourth2.append(image1);
      image1.addEventListener("click", function() {
      window.location.href="navdata.html";
    });
    }
    else{
      alert("User already exists");
    }
  }
  async function mainfunc1(e){
    e.preventDefault();
    let logindata={
      username:document.getElementById('email1').value,
      password:document.getElementById('pass1').value,
    };
    logindata=JSON.stringify(logindata);
    let loginapilink='https://masai-api-mocker.herokuapp.com/auth/login';
    let response=await fetch(loginapilink,{
      method:'POST',
      body:logindata,
      headers:{
        'Content-Type':'application/json',
      },
    });
    let data=await response.json();
    console.log(data);
    if(data.error==false)
    {
      alert("Sign In successful");
      closeForm();
      
      let image1=document.createElement("img");
      image1.src="https://dynamic-media-cdn.tripadvisor.com/media/photo-o/1a/f6/77/ae/default-avatar-2020-2.jpg?w=100&h=-1&s=1";
      let fourth=document.getElementById("newsign");
      image1.style="height:40px;width:40px;border-radius:20px;margin-top:10px;margin-left:10px";
      // fourth.innerHTML="";
      fourth.innerHTML="";
      let fourth2=document.getElementById("newsign2");
      fourth2.append(image1);
      image1.addEventListener("click", function() {
        window.location.href="navdata.html";
      });

    }
    else{
      alert("Invalid Username or Password");
    }
  }
</script>
